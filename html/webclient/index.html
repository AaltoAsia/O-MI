<!DOCTYPE html>
<!--
  Copyright (c) 2015 Aalto University.

  Licensed under the 4-clause BSD (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at top most directory of project.

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>O-MI Node</title>

	<link href="css/lib/bootstrap.css" rel="stylesheet" />
	<link href="themes/default/style.min.css" rel="stylesheet" />
	<link href="css/lib/codemirror.css" rel="stylesheet" />
  <link href="css/lib/bootstrap-datetimepicker.min.css" rel="stylesheet" />

	<link href="css/mystyle.css" rel="stylesheet" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
     <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
     <![endif]-->
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script type="text/javascript" src="js/lib/jquery.js"></script>
	<script type="text/javascript" src="js/lib/bootstrap.js"></script>
	<script type="text/javascript" src="js/lib/moment-with-locales.min.js"></script>
	<script type="text/javascript" src="js/lib/bootstrap-datetimepicker.min.js"></script>
	<script type="text/javascript" src="js/lib/jstree.js"></script>
	<script type="text/javascript" src="js/lib/codemirror.js"></script>
	<script type="text/javascript" src="js/lib/xml.js"></script>

	<script type="text/javascript" src="js/CodeMirrorFormatExt.js"></script>
	<script type="text/javascript" src="js/initialize.js"></script>
	<script type="text/javascript" src="js/requests.js"></script>
	<script type="text/javascript" src="js/formlogic.js"></script>
	<script type="text/javascript" src="js/omi.js"></script>
	<script type="text/javascript" src="js/newInfoItemForm.js"></script>

</head>
<body>
  <nav class="navbar navbar-default navbar-static-top navbar-inverse" style="margin-bottom:0;">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
          data-target="#navbar-collapse" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">O-MI Node</a>
      </div>

      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav navbar-left">
          <li>
            <p class="navbar-text">
              <b id="versionNumber">Version [insert here]</b>
            </p>
            <script type="text/javascript">$.get("../VERSION", function(data) {$("#versionNumber").text(data)})</script>
          </li>
          <li>
            <form class="navbar-form navbar-left" role="search" style="width: 400px">
              <a data-toggle="tooltip" title="Enter O-MI node url. Can be used to test any O-MI Node that has CORS support." data-placement="bottom">
                <div class="input-group input-group-sm" style="width:100%;">
                  <div class="input-group-addon">Server</div>
                  <input id="targetService" type="text" class="form-control" placeholder="Enter O-MI node url" value="http://localhost:8080/" />
                  <div class="input-group-addon">URL</div>
                </div>
              </a>
            </form>
          </li>
          <!-- <li><a class="navbar-brand">WebClient</a></li> -->
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Documentation<span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li> <a target="_blank" href="../ImplementationDetails.html">Example requests and results</a> </li>
              <li> <a target="_blank" href="https://docs.google.com/document/d/10tdIBaZzR_ebyfrP0sdZoLEF5Ze6kt2HkW2xo9eQnfY/edit?usp=sharing">Implementation Details</a> </li>
              <li> <a target="_blank" href="https://docs.google.com/document/d/1qEmM89UzOnpbk1Kk1xIi_bDT_05XbyadPAIo9dvAKW0/edit?usp=sharing">Architecture</a> </li>
              <li> <a target="_blank" href="https://www2.opengroup.org/ogsys/catalog/C14B">Open Messaging Inerface standard</a> </li>
              <li> <a target="_blank" href="https://www2.opengroup.org/ogsys/catalog/C14A">Open Data Format standard</a> </li>
              <li> <a target="_blank" href="../api/index.html">API documentation</a> </li>
            </ul>
          </li>
          <li>
            <a class="navbar-brand" href="#" style="display:none;">Subscriptions 
              <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
            </a>
          </li>
        </ul>

      </div><!-- /.navbar-collapse -->
    </div> <!-- /.container-fluid -->
  </nav>
  <div class="container-fluid" role="main"><div class="row">
    <div class="col-md-4 panel-group" role="tablist">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <b>
              <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
              O-DF Structure
              <small>1. Select nodes that you want in the request</small>
            </b>
          </h4>
        </div>
        <div class="panel-body">
          <button id="readall" class="btn btn-sm btn-warning" type="button">
            <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span>
            <b>Read All</b>
          </button>
          <div id="nodetree">
            <ul>
              <li id="Objects">Objects </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <b>O-MI Request
              <small>2. Select some request type*</small>
            </b>
          </h4>
        </div>
        <div class="panel-body">
          <div class="requesttree">
            <ul>
              <li id="readReq" data-jstree='{"opened":true}'>
                <span class="glyphicon glyphicon-book" aria-hidden="true"></span>
                Read
                <ul>
                  <li id="read">
                    <span class="glyphicon glyphicon-book" aria-hidden="true"></span>
                    One-time read
                  </li>
                  <li id="subscription">
                    <span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span>
                    Subscription
                  </li>
                  <li id="poll">
                    <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
                    Poll
                  </li>
                </ul>
                <li id="cancel">
                  <span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
                  Cancel
                </li>
                <li id="write">
                  <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                  Write
                </li>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <b>Required parameters
              <small>3. Change or use the defaults*</small>
            </b>
          </h4>
        </div>
        <div class="panel-body form-horizontal">
          <div class="form-group">
            <label for="ttl" class="control-label text-nowrap col-md-4 col-lg-3">
              <span class="glyphicon glyphicon-hourglass" aria-hidden="true"></span>
              ttl:
            </label>
            <div class="col-md-8 col-lg-9" data-toggle="tooltip" title="Time To Live of the request in the server. Use ttl -1 for infinity and ttl 0 for the duration of socket connection.">
              <div class="input-group">
                <input type="number" required class="form-control" id="ttl"/>
                <div class="input-group-addon">sec</div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="interval" class="control-label text-nowrap col-md-4 col-lg-3">
              <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
              interval:
            </label>
            <div class="col-md-8 col-lg-9" data-toggle="tooltip" title="The time between data responses. Use interval -1 to subscribe for updates only.">
              <div class="input-group">
                <input type="number" required class="form-control" id="interval"/>
                <div class="input-group-addon">sec</div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="requestID" class="control-label text-nowrap col-md-4 col-lg-3">
              <span class="glyphicon glyphicon-tag" aria-hidden="true"></span>
              requestID:
            </label>
            <div class="col-md-8 col-lg-9" data-toggle="tooltip" title="Enter a requestID as given by some subscription response.">
              <input type="number" required class="form-control" id="requestID"/>
            </div>
          </div>
        </div>
      </div>
      <div class="panel panel-default optional-parameters" >
        <a aria-controls="collapseOptionalParams" aria-expanded="false" href="#collapseOptionalParams" data-toggle="collapse" role="button">
          <div class="panel-heading" role="tab" id="headingOptionalParams">
            <h4 class="panel-title">
              <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
              <b>Optional parameters</b>
            </h4>
          </div>
        </a>
        <div id="collapseOptionalParams" class="panel-collapse collapse" aria-labelledby="headingOptionalParams" role="tabpanel" aria-expanded="false" style="height: 0px;">
          <div class="panel-body form-horizontal">
            <div class="form-group">
              <label for="callback" class="control-label text-nowrap col-md-4 col-lg-3">
                <span class="glyphicon glyphicon-credit-card" aria-hidden="true"></span>
                callback:
              </label>
              <div class="col-md-8 col-lg-9" data-toggle="tooltip" title="Url for server which receives responses with http POST methods.">
                <div class="input-group">
                  <input type="url" class="form-control" id="callback"/>
                  <div class="input-group-addon">URL</div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="col-lg-6">
                <div class="form-group">
                  <label class="col-md-4 col-lg-3 text-right">Take:</label>
                </div>
                <div class="form-group">
                  <label for="newest" class="control-label text-nowrap col-md-4 col-lg-3">Newest:</label>
                  <div class="col-md-8 col-lg-9" data-toggle="tooltip" title="Number of the top newest values to request.">
                    <input type="number" class="form-control" id="newest"/>
                  </div>
                </div>
                <div class="form-group">
                  <label for="oldest" class="control-label text-nowrap col-md-4 col-lg-3">Oldest:</label>
                  <div class="col-md-8 col-lg-9" data-toggle="tooltip" title="Number of the top oldest values to request.">
                    <input type="number" class="form-control" id="oldest"/>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="form-group">
                  <label class="col-md-4 col-lg-3 text-right text-nowrap">
                    <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
                    Timeframe:
                  </label>
                </div>
                <div class="form-group">
                  <label for="begin" class="control-label text-nowrap col-md-4 col-lg-3">begin:</label>
                  <div class="col-md-8 col-lg-9" data-toggle="tooltip" title="Request values older than this." data-placement="right">
                    <div class='input-group date' id='beginpicker'>
                      <input id="begin" type='text' class="form-control" />
                      <span class="input-group-addon" onclick="javascript: $(this).closest('.date').find('input').focus()">
                        <span class="glyphicon glyphicon-calendar"></span>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="end" class="control-label text-nowrap col-md-4 col-lg-3">end:</label>
                  <div class="col-md-8 col-lg-9" data-toggle="tooltip" title="Request values newer than this." data-placement="right">
                    <div class='input-group date' id='endpicker'>
                      <input id="end" type='text' class="form-control" />
                      <span class="input-group-addon" onclick="javascript: $(this).closest('.date').find('input').focus()">
                        <span class="glyphicon glyphicon-calendar"></span>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-8">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <b>Request and response
              <small>4. Edit or send the request</small>
            </b>
          </h4>
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-md-12">
              <h4>
                <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
                Request:
                <button id="resetall" class="btn btn-sm btn-default" type="button">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  Reset All
                </button>
                <button id="send" type="button" class="btn btn-md btn-primary">
                  Send
                  <span class="glyphicon glyphicon-send" aria-hidden="true"></span>
                </button>
              </h4>
              <div class="well request">
                <textarea id="requestArea" tabindex="0" spellcheck="false" autocapitalize="off" autocorrect="off" wrap="off"></textarea>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <h4>
                <span class="glyphicon glyphicon-inbox" aria-hidden="true"></span>
                Response:
              </h4>
              <div class="well response">
                <div class="progress">
                  <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
                    <span class="sr-only">[A silly progress bar]</span>
                  </div>
                </div>
                <textarea id="responseArea" tabindex="0" spellcheck="false" autocapitalize="off" autocorrect="off" wrap="off"></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div></div>
  <div class="modal fade" id="newInfoItem" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="newInfoItemLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close newInfoCancel" style="font-size:32px;line-height:0.8" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="newInfoItemLabel">New InfoItem</h4>
        </div>
        <div class="modal-body">
          <form>
            <input type="hidden" name="parent" id="infoItemParent">
            <small>* required</small>
            <div class="form-group">
              <label for="infoItemName" class="control-label ">Name*</label>
              <a data-toggle="tooltip" title="Enter some name identifier for the InfoItem." data-placement="top">
                <input name="name" type="text" class="form-control" id="infoItemName">
              </a>
            </div>
            <div class="form-group">
              <label for="infoItemDescription" class="control-label">Description</label>
              <a data-toggle="tooltip" title="Optionally enter short description about the InfoItem. (Metadata)" data-placement="top">
                <input name="description" type="text" class="form-control" id="infoItemDescription">
              </a>
            </div>

            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <b>Values*</b>
                </h4>
              </div>
              <div id="newValues" class="panel-body">
                <div class="well value-group form-group container-fluid">
                  <div class="row">
                  <label class="control-label col-md-12">Value*
                    <a data-toggle="tooltip" title="Enter a new value for this InfoItem. It might be required, otherwise the server might not save it." data-placement="top">
                      <input name="value" type="text" class="form-control">
                    </a>
                  </label>
                  </div>
                  <div class="row">
                    <label class="control-label col-md-6">Type
                      <select name="valuetype" class="form-control"
                        data-toggle="tooltip" title="Optionally select xml type to be saved as a metadata for this value." data-placement="top">
                        <option value="">[no type]</option>               
                        <option>int</option>               
                        <option>byte</option>              
                        <option>short</option>             
                        <option>long</option>              
                        <option>float</option>             
                        <option>double</option>            
                        <option>integer</option>           
                        <option>nonPositiveInteger</option>
                        <option>negativeInteger</option>   
                        <option>nonNegativeInteger</option>
                        <option>positiveInteger</option>   
                        <option>unsignedLong</option>      
                        <option>unsignedInt</option>       
                        <option>unsignedShort</option>     
                        <option>unsignedByte</option>      
                        <option>decimal</option>           
                        <option>boolean</option>           
                        <option selected>string</option>            
                        <option>normalizedString</option>  
                        <option>token</option>             
                        <option>language</option>          
                        <option>Name</option>              
                        <option>NCName</option>            
                        <option>NMTOKEN</option>           
                        <option>NMTOKENS</option>          
                        <option>ID</option>                
                        <option>IDREF</option>             
                        <option>IDREFS</option>            
                        <option>ENTITY</option>            
                        <option>ENTITIES</option>          
                        <option>hexBinary</option>         
                        <option>base64Binary</option>      
                        <option>anyURI</option>            
                        <option>QName</option>             
                        <option>NOTATION</option>          
                        <option>duration</option>          
                        <option>dateTime</option>          
                        <option>time</option>              
                        <option>gYearMonth</option>        
                        <option>gYear</option>             
                        <option>gMonthDay</option>         
                        <option>gDay</option>              
                        <option>gMonth</option>            
                      </select>
                    </label>
                    <div class="col-md-6">
                      <label class="control-label" style="margin-bottom:0;">Unix Time</label>
                      <div data-toggle="tooltip" title="Optionally input timestamp for the value. If omitted, server will fill in the current time. NOTE: There cannot be two values with same time." data-placement="top">
                        <div class='input-group date timestamp'>
                          <input name="valuetime" type="text" class="form-control">
                          <span class="input-group-addon">
                            <span class="glyphicon glyphicon-time"></span>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <button type="button" class="btn btn-info form-control btn-clone-above"><b>+</b></button>
              </div>
            </div>

            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <b>MetaData</b>
                </h4>
              </div>
              <div class="panel-body">
                <div class="well metadata-group form-group container-fluid" style="display:none;">
                  <label class="control-label col-md-12">Name*
                    <a data-toggle="tooltip" title="Optionally input some metadata. The name could be some descriptive title, e.g. 'Sensor manufacturer' or 'Max value'" data-placement="top">
                      <input name="metadataname" type="text" class="form-control">
                    </a>
                  </label>
                  <label class="control-label col-md-12">Value*
                    <a data-toggle="tooltip" title="Enter a value for this metadata. This can be anything." data-placement="top">
                      <input name="metadatavalue" type="text" class="form-control">
                    </a>
                  </label>
                  <label class="control-label col-md-12">Type
                    <select name="metadatatype" class="form-control"
                      data-toggle="tooltip" title="Optionally select a type for metadata value. It will just be extra metadata." data-placement="top">
                      <option value="">[no type]</option>               
                      <option>int</option>               
                      <option>byte</option>              
                      <option>short</option>             
                      <option>long</option>              
                      <option>float</option>             
                      <option>double</option>            
                      <option>integer</option>           
                      <option>nonPositiveInteger</option>
                      <option>negativeInteger</option>   
                      <option>nonNegativeInteger</option>
                      <option>positiveInteger</option>   
                      <option>unsignedLong</option>      
                      <option>unsignedInt</option>       
                      <option>unsignedShort</option>     
                      <option>unsignedByte</option>      
                      <option>decimal</option>           
                      <option>boolean</option>           
                      <option selected>string</option>            
                      <option>normalizedString</option>  
                      <option>token</option>             
                      <option>language</option>          
                      <option>Name</option>              
                      <option>NCName</option>            
                      <option>NMTOKEN</option>           
                      <option>NMTOKENS</option>          
                      <option>ID</option>                
                      <option>IDREF</option>             
                      <option>IDREFS</option>            
                      <option>ENTITY</option>            
                      <option>ENTITIES</option>          
                      <option>hexBinary</option>         
                      <option>base64Binary</option>      
                      <option>anyURI</option>            
                      <option>QName</option>             
                      <option>NOTATION</option>          
                      <option>duration</option>          
                      <option>dateTime</option>          
                      <option>time</option>              
                      <option>gYearMonth</option>        
                      <option>gYear</option>             
                      <option>gMonthDay</option>         
                      <option>gDay</option>              
                      <option>gMonth</option>            
                    </select>
                  </label>
                  <label class="control-label col-md-12">description
                    <a data-toggle="tooltip" title="Optionally enter some extra description for this metadata." data-placement="top">
                      <input name="metadatadescription" type="text" class="form-control">
                    </a>
                  </label>
                </div>
                <button type="button" class="btn btn-info form-control btn-clone-above"><b>+</b></button>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default newInfoCancel" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary newInfoSubmit">Add to request</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
